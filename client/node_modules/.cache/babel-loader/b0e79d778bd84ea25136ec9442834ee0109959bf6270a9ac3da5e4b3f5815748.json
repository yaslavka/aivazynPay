{"ast":null,"code":"import axios from'axios';import Raven from'raven-js';import{getAccessToken}from'../../utils';export const baseInstance=axios.create({baseURL:process.env.REACT_APP_BASE_URL});export const baseInstanceAv=axios.create({baseURL:process.env.REACT_APP_AVITO_BASE_URL});baseInstance.interceptors.request.use(config=>{const token=getAccessToken();if(token){config.headers.Authorization=\"Bearer \".concat(token);}return config;},error=>{Raven.captureException(error);return Promise.reject(error);});baseInstance.interceptors.response.use(response=>response===null||response===void 0?void 0:response.data,error=>{var _error$response;Raven.captureException(error);if((error===null||error===void 0?void 0:(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401){var _error$response2,_error$response2$data;localStorage.clear();localStorage.removeItem('persist:root');localStorage.removeItem('access_token');throw new Error(error===null||error===void 0?void 0:(_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message);}else if(error!==null&&error!==void 0&&error.response){var _error$response3,_error$response3$data;throw new Error(error===null||error===void 0?void 0:(_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.message);}else{throw new Error(error===null||error===void 0?void 0:error.message);}});baseInstanceAv.interceptors.response.use(response=>response===null||response===void 0?void 0:response.data,error=>{Raven.captureException(error);if(error!==null&&error!==void 0&&error.response){var _error$response4,_error$response4$data;throw new Error(error===null||error===void 0?void 0:(_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.message);}else{throw new Error(error===null||error===void 0?void 0:error.message);}});","map":{"version":3,"names":["axios","Raven","getAccessToken","baseInstance","create","baseURL","process","env","REACT_APP_BASE_URL","baseInstanceAv","REACT_APP_AVITO_BASE_URL","interceptors","request","use","config","token","headers","Authorization","concat","error","captureException","Promise","reject","response","data","_error$response","status","_error$response2","_error$response2$data","localStorage","clear","removeItem","Error","message","_error$response3","_error$response3$data","_error$response4","_error$response4$data"],"sources":["/Users/viacheslv/devlop/aivazynPay/client/src/config/api/index.js"],"sourcesContent":["import axios from 'axios'\nimport Raven from 'raven-js'\nimport { getAccessToken } from '../../utils'\nexport const baseInstance = axios.create({\n  baseURL: process.env.REACT_APP_BASE_URL,\n})\n\nexport const baseInstanceAv = axios.create({\n  baseURL: process.env.REACT_APP_AVITO_BASE_URL,\n})\n\nbaseInstance.interceptors.request.use(\n  (config) => {\n    const token = getAccessToken()\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`\n    }\n    return config\n  },\n  (error) => {\n    Raven.captureException(error)\n    return Promise.reject(error)\n  },\n)\nbaseInstance.interceptors.response.use(\n  (response) => response?.data,\n  (error) => {\n    Raven.captureException(error)\n    if (error?.response?.status === 401) {\n      localStorage.clear()\n      localStorage.removeItem('persist:root')\n      localStorage.removeItem('access_token')\n      throw new Error(error?.response?.data?.message)\n    } else if (error?.response) {\n      throw new Error(error?.response?.data?.message)\n    } else {\n      throw new Error(error?.message)\n    }\n  },\n)\n\nbaseInstanceAv.interceptors.response.use(\n  (response) => response?.data,\n  (error) => {\n    Raven.captureException(error)\n    if (error?.response) {\n      throw new Error(error?.response?.data?.message)\n    } else {\n      throw new Error(error?.message)\n    }\n  },\n)\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}